% !TEX root = ../asfpp-user-manual.tex

\section{Installing \asf}
\label{chap:installing-asfpp}
\asf is based on \omnet 4.x and Castalia 3.x and it is designed to operate on Linux distributions based on Debian. It also requires the library \texttt{libxml}. 

\asf was succesfully tested under the following conditions:
%
\begin{itemize}
\item Ubuntu 14.04 LTS;
\item Python 2.7.6;
\item g\texttt{++} compiler 4.9.2;
\item \omnet 4.6;
\item Castalia 3.2;
\end{itemize}

This manual refers to an environment based on the conditions listed above.

The steps to install \asf are the following:
%
\begin{enumerate}
\item satisfy the prerequisites;
\item get and install the library \texttt{libxml};
\item get and install the framework \omnet;
\item get and install \asf. 
\end{enumerate}


\subsection{Prerequisites}
\asf requires at least Python 2.7.6 and g\texttt{++} 4.9.2. Ubuntu 14.04 comes with them.

Anyway, you can install the package build-essential by following commands in terminal:
%
\begin{lstlisting}[language={terminal}]
@~$@ sudo add-apt-repository "deb http://archive.ubuntu.com/ubuntu $(lsb_release -sc) main universe"
@~$@ sudo apt-get update
@~$@ sudo apt-get install build-essential
\end{lstlisting}


\subsection{Library \texttt{libxml}}
The instructions to install the library \texttt{libxml} can be found at \url{http://libxmlplusplus.sourceforge.net/docs/manual/html/index.html}. The sources are available at \url{http://libxmlplusplus.sourceforge.net/}.

You can install the library \texttt{libxml} by following command in terminal:
%
\begin{lstlisting}[language={terminal}]
@~$@ sudo apt-get install libxml++2.6-dev libxml++2.6-doc
\end{lstlisting}


\subsection{\omnet}
\asf is built on Castalia 3.2 and \omnet 4.6. It is advisable to install at least the version 4.6 of \omnet.
You can obtain the \texttt{tgz} file at \url{https://omnetpp.org/omnetpp/summary/30-omnet-releases/2290-omnet-4-6-source-ide-tgz} (you have to pass the Captcha protection test). The download will take a while.

Untar and unzip the downloaded file:
%
\begin{lstlisting}[language={terminal}]
@~$@ tar xvfz omnetpp-4.6-src.tgz
\end{lstlisting}
%
It creates the folder \texttt{omnetpp-4.6}.

Set environment variables (assuming you are using bash as your shell):
%
\begin{lstlisting}[language={terminal}]
@~$@ export PATH=$PATH:~/omnetpp-4.6/bin
@~$@ export LD_LIBRARY_PATH=~/omnetpp-4.6/lib
\end{lstlisting}
%
Append the above two export commands to \texttt{.bash\_profile} file.

Now you can build \omnet 4.6:
%
\begin{lstlisting}[language={terminal}]
@~$@ cd omnetpp-4.6/
@~/omnetpp-4.6$@ NO_TCL=1 ./configure
@~/omnetpp-4.6$@ make
\end{lstlisting}
%
It will take a while.

If something goes wrong, use the \omnet 4.6 manual as a reference. You can get the \omnet 4.6 manual at \url{http://www.omnetpp.org/documentation}.



\subsection{\asf (and Castalia)}
\label{sec:asfpp-install}
\asf is bundled with Castalia 3.2.

You can get \asf sources at \url{https://github.com/asfpp/asfpp}

Unzip it in the folder \texttt{asfpp}:
%
\begin{lstlisting}[language={terminal}]
@~$@ unzip asfpp-master.zip -d asfpp
\end{lstlisting}

Now you can build it:
%
\begin{lstlisting}[language={terminal}]
@~$@ cd asfpp
@~/asfpp$@ ./makemake
@~/asfpp$@ make
\end{lstlisting}
%
It will take a while.

At last, check if all files in the folder \texttt{bin} have the execution permission. If not set it by following in terminal:
\begin{lstlisting}[language={terminal}]
@~/asfpp$@ cd bin 
@~/asfpp/bin$@ chmod u+x Castalia
@~/asfpp/bin$@ chmod u+x CastaliaPlot
@~/asfpp/bin$@ chmod u+x CastaliaResult
\end{lstlisting}

For a better user experience, we suggest to export the environment variable \texttt{~/asfpp/bin}:
%
\begin{lstlisting}[language={terminal}]
@~$@ export PATH=$PATH:~/asfpp/bin
\end{lstlisting}
%
Add the command above to the \texttt{.bash\_profile} file:
